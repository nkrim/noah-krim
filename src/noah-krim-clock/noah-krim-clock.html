<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="./webgl/clockgl.html">

<dom-module id="noah-krim-clock">
	<template>
		<style>
			:host {
				display: block;
			}

			#canvas:focus {
				/*outline: none;*/
			}
		</style>

		<canvas id="canvas" tabindex="0" autofocus$="[[autofocusCanvas]]"></canvas>
		
	</template>
	<script>
		Polymer({
			is: 'noah-krim-clock',

			properties: {
				width: {
					type: Number,
					value: 640,
				},

				height: {
					type: Number,
					value: 480,
				},
			},

			observers: [
				'_observeDimensions(width,height)',
			],

			ready: function() {
				this.isReady = true;
				this.setCanvasDimensions();
			},

			/** 
				Public functions
			*/
			start: function() {
				clockgl.start(this.$.canvas);
			},

			setCanvasDimensions: function() {
				var widthpx = this.width+'px';
				var heightpx = this.height+'px';
				var canvas = this.$.canvas;
				canvas.setAttribute('width', widthpx);
				canvas.setAttribute('height', heightpx);
				canvas.style.width = widthpx;
				canvas.style.height = heightpx;
			},

			/**
				Observer functions
			*/
			_observeDimensions: function(width, height) {
				if(!this.isReady)
					return;
				this.setCanvasDimensions();
			},
		});
	</script>
</dom-module>